{% assign events = site.data.swingweb_events | where_exp:"item","item.kind != 'Medlemskap'" %}
{% assign grouped = events | sort: "category_id" | group_by: "category_id" %}

{% for category in grouped %}
<div>
  <h3>{{ category.items[0].category }}</h3>
  <ul>
  {% assign sorted = category.items | sort: "sort_key" %}
  {% for event in sorted %}
    <li>
      <a href="{{ event.source }}">
        {{ event.title }}
      </a>
    </li>
  {% endfor %}
  </ul>
{% endfor %}
</div>

